# Guide on how to train and perform inference on [vits](https://github.com/jaywalnut310/vits)

## First you need a dataset you can follow this [guide](https://github.com/EmanuelRiquelme/vits-preprocessing)

### How to setup train and inference:
#### Get the vits repository
`git clone https://github.com/jaywalnut310/vits`
#### Clone this repository:
`git clone https://github.com/EmanuelRiquelme/train-infer-vits-esp
`
#### Copy all the files from this repository to vits
`mv train-infer-vits-esp/* vits`
`cd vits`
#### Install all of the required dependencies to be able to run Vits in your system.
#### Generate the json file containing all the parameters of the model to be trainied:
`python generate_json.py --epochs 400 --batches 9 --fp_16_run True --training_files 'dataset/train.txt.cleaned' --validation_files 'dataset/val.txt.cleaned' --output_name 'configs/def.json'`

* epochs is the number of epochs that the model will be trained
* batches is the batch size of the training
* fp_16_run is to initialize the model in fp16 set it to True if your GPU is compatible
* training_files Specify the location of the pre-processed text file containing the location of the audio and transcriptions of the dataset to  be trained. 
* validation_files Specify the location of the pre-processed text file containing the location of the audio and transcriptions of the dataset to  be tested. 
* output_name the name of the json file generated (you must include the .json format and the directory where you wanna save it)
#### Train the model
`python train.py -c configs/def.json -m def`
* c is the location of the json file containing the parameters of the model to be trained (the file generated by the function generate_json)
* m is the name of the model (the model will be saved in a directory by set by its name in the directory logs )
#### Perform inference
`python inference.py --json_file ./configs/ljs_base.json --model_path logs/ljs_base/G_62000.pth --audio_output_name logs/ljs_base/test.wav --text "La vida es como una bicicleta"`
* json_file Is the location of the json file containing the parameters of the model to be trained (the file generated by the function generate_json)
* model_path Is the localization of the weights of the model trained by default the weights will be saved in a directory by set by its name in the directory logs
* audio_output_name the save of the audio file generated by the model (you must include the .wav format and the directory where you wanna save it)
* text: the text to be converted to audio by the model.
